

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Publish Results - OLP</title>
    <link rel="stylesheet" href="style.css">
    <script>
        // Function to fetch courses when the page loads
        window.onload = function() {
            fetchCourses();
        };

        // Fetch courses for the logged-in user
        function fetchCourses() {
            fetch('fetch_courses.php')
                .then(response => response.json())
                .then(data => {
                    const courseSelect = document.getElementById('course-select');
                    courseSelect.innerHTML = '<option value="">Choose a Course</option>';
                    
                    data.forEach(course => {
                        const option = document.createElement('option');
                        option.value = course;
                        option.textContent = course;
                        courseSelect.appendChild(option);
                    });
                })
                .catch(error => {
                    console.error('Error fetching courses:', error);
                });
        }

        // Fetch quizzes based on selected Course_ID
        function fetchQuizzes() {
            const courseID = document.getElementById('course-select').value;

            if (courseID) {
                fetch(`fetch_quizzes.php?Course_ID=${courseID}`)
                    .then(response => response.json())
                    .then(data => {
                        const quizSelect = document.getElementById('quiz-select');
                        quizSelect.innerHTML = '<option value="">Choose a Quiz</option>';
                        
                        if (data.length > 0) {
                            data.forEach(quiz => {
                                const option = document.createElement('option');
                                option.value = quiz;
                                option.textContent = quiz;
                                quizSelect.appendChild(option);
                            });
                        } else {
                            const option = document.createElement('option');
                            option.value = '';
                            option.textContent = 'No quizzes available';
                            quizSelect.appendChild(option);
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching quizzes:', error);
                    });
            } else {
                const quizSelect = document.getElementById('quiz-select');
                quizSelect.innerHTML = '<option value="">Choose a Course first</option>';
            }
        }
    </script>
</head>
<body>
    <div class="publish-results-container">
        <h1>Publish Quiz Results</h1>

        <form class="publish-form" method="POST" action="submit_results.php">
            <!-- Select Course -->
            <label for="course-select">Select Course:</label>
            <select id="course-select" name="Course_ID" required onchange="fetchQuizzes()">
                <option value="">Choose a Course</option>
                <!-- Course options will be populated dynamically -->
            </select>

            <!-- Select Quiz -->
            <label for="quiz-select">Select Quiz:</label>
            <select id="quiz-select" name="Quiz_NO" required>
                <option value="">Choose a Quiz</option>
                <!-- Quiz options will be populated dynamically -->
            </select>

            
            <button type="submit">Publish Results</button>
        </form>

        <a href="instructor_dashboard.html"><button class="back-btn">Back to Dashboard</button></a>
    </div>
</body>
</html>
